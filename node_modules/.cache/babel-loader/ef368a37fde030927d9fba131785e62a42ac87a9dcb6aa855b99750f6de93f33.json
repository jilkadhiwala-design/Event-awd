{"ast":null,"code":"var _jsxFileName = \"D:\\\\HARSH\\\\React\\\\Event-awd\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  // --- kept your original state and variables ---\n  const [events, setEvents] = useState([]);\n  const [newEvent, setNewEvent] = useState({\n    title: \"\",\n    date: \"\",\n    location: \"\",\n    desc: \"\"\n  });\n\n  // Edit state (kept)\n  const [editIndex, setEditIndex] = useState(null);\n  const [editEvent, setEditEvent] = useState({\n    title: \"\",\n    date: \"\",\n    location: \"\",\n    desc: \"\"\n  });\n\n  // thumbnail path you uploaded (local path)\n  const uploadedImageUrl = \"/mnt/data/83ef8988-4e1a-4cb2-b6c4-7062b81cfdf6.png\";\n\n  // keys for localStorage\n  const LOCAL_KEY = \"events_local\"; // where local/user events are saved\n  const JSON_RAW_KEY = \"events_json_raw\"; // raw events.json text for change detection\n\n  // We'll keep jsonEvents and localEvents internally to build merged 'events' shown in UI\n  const [jsonEvents, setJsonEvents] = useState([]);\n  const [localEvents, setLocalEvents] = useState([]);\n\n  // helper: unique key for an event (used to dedupe / match)\n  const eventKey = ev => `${(ev.title || \"\").trim()}|${(ev.date || \"\").trim()}`;\n\n  // Merge function: json first (defaults) then local overrides/additions\n  const buildMerged = (jsonArr = [], localArr = []) => {\n    const map = new Map();\n    // add json events in order (as defaults)\n    jsonArr.forEach(ev => {\n      map.set(eventKey(ev), {\n        ...ev,\n        source: \"json\"\n      });\n    });\n    // add/overwrite with local events (local wins)\n    localArr.forEach(ev => {\n      // allow tombstone objects with __deleted flag to hide json entries\n      if (ev && ev.__deleted) {\n        map.delete(eventKey(ev));\n        return;\n      }\n      map.set(eventKey(ev), {\n        ...ev,\n        source: \"local\"\n      });\n    });\n\n    // preserve json order for items present in json, then append local-only\n    const merged = [];\n    const used = new Set();\n    jsonArr.forEach(ev => {\n      const key = eventKey(ev);\n      if (map.has(key)) {\n        merged.push(map.get(key));\n        used.add(key);\n      }\n    });\n    // append remaining items from map that were not in json (local-only)\n    for (const [k, v] of map.entries()) {\n      if (!used.has(k)) merged.push(v);\n    }\n    return merged;\n  };\n\n  // Load events: read localEvents from storage, fetch events.json (no cache), merge\n  useEffect(() => {\n    // 1) read local events\n    const savedLocalRaw = localStorage.getItem(LOCAL_KEY);\n    let savedLocal = [];\n    if (savedLocalRaw) {\n      try {\n        const parsed = JSON.parse(savedLocalRaw);\n        if (Array.isArray(parsed)) savedLocal = parsed;\n      } catch (err) {\n        console.warn(\"Invalid local events - clearing local copy\", err);\n        savedLocal = [];\n      }\n    }\n    setLocalEvents(savedLocal);\n\n    // 2) fetch events.json (no-store to force fresh)\n    fetch(\"/events.json\", {\n      cache: \"no-store\"\n    }).then(res => {\n      if (!res.ok) throw new Error(\"events.json not found\");\n      return res.text();\n    }).then(raw => {\n      // change detection (store raw if changed)\n      const prevRaw = localStorage.getItem(JSON_RAW_KEY);\n      if (raw !== prevRaw) {\n        localStorage.setItem(JSON_RAW_KEY, raw);\n      }\n      let parsed = [];\n      try {\n        parsed = JSON.parse(raw);\n        if (!Array.isArray(parsed)) parsed = [];\n      } catch (err) {\n        console.warn(\"events.json parse error\", err);\n        parsed = [];\n      }\n      setJsonEvents(parsed);\n\n      // Build merged list and update UI (this keeps your `events` state populated)\n      const merged = buildMerged(parsed, savedLocal);\n      setEvents(merged);\n    }).catch(err => {\n      // if fetch fails, fallback to local events only\n      console.warn(\"Could not fetch events.json:\", err);\n      setJsonEvents([]);\n      const merged = buildMerged([], savedLocal);\n      setEvents(merged);\n    });\n  }, []); // run once on mount\n\n  // Persist helper for local events (we persist localEvents separately, and rebuild merged UI)\n  const persistLocal = updatedLocal => {\n    setLocalEvents(updatedLocal);\n    try {\n      localStorage.setItem(LOCAL_KEY, JSON.stringify(updatedLocal));\n    } catch (err) {\n      console.warn(\"Could not save local events:\", err);\n    }\n    // rebuild merged UI using the current jsonEvents\n    setEvents(buildMerged(jsonEvents, updatedLocal));\n  };\n\n  // Add new event -> add to localEvents (keeps events.json intact, prevents duplication)\n  const addEvent = e => {\n    e.preventDefault();\n    if (!newEvent.title || !newEvent.date) return;\n    const added = {\n      ...newEvent,\n      source: \"local\"\n    };\n    const updatedLocal = [...localEvents, added];\n    persistLocal(updatedLocal);\n    setNewEvent({\n      title: \"\",\n      date: \"\",\n      location: \"\",\n      desc: \"\"\n    });\n  };\n\n  // Delete event: if event is local, remove from local list. If it is from json, create a tombstone in local to hide it.\n  const deleteEvent = index => {\n    if (!window.confirm(\"Are you sure you want to delete this event?\")) return;\n    const ev = events[index];\n    const key = eventKey(ev);\n    if (!ev) return;\n    if (ev.source === \"local\") {\n      // remove local item with same key\n      const updatedLocal = localEvents.filter(le => eventKey(le) !== key);\n      persistLocal(updatedLocal);\n    } else {\n      // create a tombstone to hide json-origin event\n      const tombstone = {\n        title: ev.title,\n        date: ev.date,\n        __deleted: true,\n        source: \"local\"\n      };\n      // prevent duplicate tombstones\n      const already = localEvents.some(le => le.__deleted && eventKey(le) === key);\n      if (!already) {\n        persistLocal([...localEvents, tombstone]);\n      }\n    }\n\n    // adjust editIndex if the removed item affects it\n    if (editIndex === index) {\n      setEditIndex(null);\n      setEditEvent({\n        title: \"\",\n        date: \"\",\n        location: \"\",\n        desc: \"\"\n      });\n    } else if (editIndex !== null && index < editIndex) {\n      setEditIndex(prev => prev === null ? null : prev - 1);\n    }\n  };\n\n  // Start editing an event (index is relative to merged events displayed)\n  const startEdit = index => {\n    setEditIndex(index);\n    const ev = events[index];\n    setEditEvent({\n      title: ev.title || \"\",\n      date: ev.date || \"\",\n      location: ev.location || \"\",\n      desc: ev.desc || \"\"\n    });\n  };\n\n  // Cancel edit (kept)\n  const cancelEdit = () => {\n    setEditIndex(null);\n    setEditEvent({\n      title: \"\",\n      date: \"\",\n      location: \"\",\n      desc: \"\"\n    });\n  };\n\n  // Save edited event: store as local override (so json remains unchanged)\n  const saveEdit = e => {\n    e.preventDefault();\n    if (!editEvent.title || !editEvent.date) return;\n    const target = events[editIndex];\n    const key = eventKey(target);\n    // if there's existing local event with same key, replace it; else add new local override\n    const localsCopy = [...localEvents];\n    const localIdx = localsCopy.findIndex(le => eventKey(le) === key);\n    const newLocal = {\n      ...editEvent,\n      source: \"local\"\n    };\n    if (localIdx >= 0) localsCopy[localIdx] = newLocal;else localsCopy.push(newLocal);\n    persistLocal(localsCopy);\n    setEditIndex(null);\n    setEditEvent({\n      title: \"\",\n      date: \"\",\n      location: \"\",\n      desc: \"\"\n    });\n  };\n\n  // UI list filtered: exclude tombstones and optionally sort (kept same structure)\n  const uiEvents = events.filter(ev => !(ev && ev.__deleted));\n\n  // --- REST OF YOUR ORIGINAL JSX (kept structure, only wiring to uiEvents / events) ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"bg-gradient-to-br from-pink-50 to-white border-b\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page py-14\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 items-center gap-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-4xl md:text-5xl font-bold leading-tight\",\n              children: [\"Plan, Publish & Manage \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-primary\",\n                children: \"Events\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 40\n              }, this), \" with Ease\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-4 text-gray-600\",\n              children: \"Create events, track registrations, and share updates \\u2014 all in one simple interface.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/register\",\n                className: \"btn btn-primary\",\n                children: \"Get Started\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/about\",\n                className: \"btn bg-white border\",\n                children: \"Learn More\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold mb-3\",\n              children: \"Quick Add Event\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"grid gap-3\",\n              onSubmit: addEvent,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border rounded-xl px-4 py-2.5\",\n                placeholder: \"Event Title\",\n                value: newEvent.title,\n                onChange: e => setNewEvent({\n                  ...newEvent,\n                  title: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"border rounded-xl px-4 py-2.5\",\n                value: newEvent.date,\n                onChange: e => setNewEvent({\n                  ...newEvent,\n                  date: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border rounded-xl px-4 py-2.5\",\n                placeholder: \"Location\",\n                value: newEvent.location,\n                onChange: e => setNewEvent({\n                  ...newEvent,\n                  location: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"border rounded-xl px-4 py-2.5\",\n                rows: \"3\",\n                placeholder: \"Description\",\n                value: newEvent.desc,\n                onChange: e => setNewEvent({\n                  ...newEvent,\n                  desc: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                type: \"submit\",\n                children: \"Add Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold\",\n          children: \"Upcoming Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn bg-white border text-sm\",\n          onClick: () => {\n            // clear stored json raw so the next load will treat events.json as changed\n            localStorage.removeItem(JSON_RAW_KEY);\n            // simple full reload to re-run the useEffect fetch logic\n            window.location.reload();\n          },\n          children: \"Refresh events.json\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid sm:grid-cols-2 lg:grid-cols-3 gap-5\",\n        children: [uiEvents.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"No events yet. Add one using the form above.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), uiEvents.map((e, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: editIndex === i ? /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"grid gap-3\",\n            onSubmit: saveEdit,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border rounded-xl px-4 py-2.5\",\n              placeholder: \"Event Title\",\n              value: editEvent.title,\n              onChange: ev => setEditEvent({\n                ...editEvent,\n                title: ev.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"border rounded-xl px-4 py-2.5\",\n              value: editEvent.date,\n              onChange: ev => setEditEvent({\n                ...editEvent,\n                date: ev.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border rounded-xl px-4 py-2.5\",\n              placeholder: \"Location\",\n              value: editEvent.location,\n              onChange: ev => setEditEvent({\n                ...editEvent,\n                location: ev.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"border rounded-xl px-4 py-2.5\",\n              rows: \"3\",\n              placeholder: \"Description\",\n              value: editEvent.desc,\n              onChange: ev => setEditEvent({\n                ...editEvent,\n                desc: ev.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                type: \"submit\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn bg-white border\",\n                onClick: cancelEdit,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: uploadedImageUrl,\n                  alt: \"thumb\",\n                  className: \"w-12 h-12 rounded-md object-cover\",\n                  onError: ev => {\n                    ev.currentTarget.style.display = \"none\";\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-lg font-semibold\",\n                    children: e.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 331,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600\",\n                    children: e.location\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs bg-pink-100 text-pink-600 px-2 py-1 rounded-full\",\n                children: e.date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm mt-3\",\n              children: e.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn bg-white border\",\n                onClick: () => startEdit(i),\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                onClick: () => deleteEvent(i),\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"9y4a0v5GpNNRPtu6zD02mQl6ftw=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","events","setEvents","newEvent","setNewEvent","title","date","location","desc","editIndex","setEditIndex","editEvent","setEditEvent","uploadedImageUrl","LOCAL_KEY","JSON_RAW_KEY","jsonEvents","setJsonEvents","localEvents","setLocalEvents","eventKey","ev","trim","buildMerged","jsonArr","localArr","map","Map","forEach","set","source","__deleted","delete","merged","used","Set","key","has","push","get","add","k","v","entries","savedLocalRaw","localStorage","getItem","savedLocal","parsed","JSON","parse","Array","isArray","err","console","warn","fetch","cache","then","res","ok","Error","text","raw","prevRaw","setItem","catch","persistLocal","updatedLocal","stringify","addEvent","e","preventDefault","added","deleteEvent","index","window","confirm","filter","le","tombstone","already","some","prev","startEdit","cancelEdit","saveEdit","target","localsCopy","localIdx","findIndex","newLocal","uiEvents","children","className","fileName","_jsxFileName","lineNumber","columnNumber","to","onSubmit","placeholder","value","onChange","type","rows","onClick","removeItem","reload","length","i","required","src","alt","onError","currentTarget","style","display","_c","$RefreshReg$"],"sources":["D:/HARSH/React/Event-awd/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Home() {\r\n  // --- kept your original state and variables ---\r\n  const [events, setEvents] = useState([]);\r\n  const [newEvent, setNewEvent] = useState({ title: \"\", date: \"\", location: \"\", desc: \"\" });\r\n\r\n  // Edit state (kept)\r\n  const [editIndex, setEditIndex] = useState(null);\r\n  const [editEvent, setEditEvent] = useState({ title: \"\", date: \"\", location: \"\", desc: \"\" });\r\n\r\n  // thumbnail path you uploaded (local path)\r\n  const uploadedImageUrl = \"/mnt/data/83ef8988-4e1a-4cb2-b6c4-7062b81cfdf6.png\";\r\n\r\n  // keys for localStorage\r\n  const LOCAL_KEY = \"events_local\";        // where local/user events are saved\r\n  const JSON_RAW_KEY = \"events_json_raw\";  // raw events.json text for change detection\r\n\r\n  // We'll keep jsonEvents and localEvents internally to build merged 'events' shown in UI\r\n  const [jsonEvents, setJsonEvents] = useState([]);\r\n  const [localEvents, setLocalEvents] = useState([]);\r\n\r\n  // helper: unique key for an event (used to dedupe / match)\r\n  const eventKey = (ev) => `${(ev.title || \"\").trim()}|${(ev.date || \"\").trim()}`;\r\n\r\n  // Merge function: json first (defaults) then local overrides/additions\r\n  const buildMerged = (jsonArr = [], localArr = []) => {\r\n    const map = new Map();\r\n    // add json events in order (as defaults)\r\n    jsonArr.forEach((ev) => {\r\n      map.set(eventKey(ev), { ...ev, source: \"json\" });\r\n    });\r\n    // add/overwrite with local events (local wins)\r\n    localArr.forEach((ev) => {\r\n      // allow tombstone objects with __deleted flag to hide json entries\r\n      if (ev && ev.__deleted) {\r\n        map.delete(eventKey(ev));\r\n        return;\r\n      }\r\n      map.set(eventKey(ev), { ...ev, source: \"local\" });\r\n    });\r\n\r\n    // preserve json order for items present in json, then append local-only\r\n    const merged = [];\r\n    const used = new Set();\r\n    jsonArr.forEach((ev) => {\r\n      const key = eventKey(ev);\r\n      if (map.has(key)) {\r\n        merged.push(map.get(key));\r\n        used.add(key);\r\n      }\r\n    });\r\n    // append remaining items from map that were not in json (local-only)\r\n    for (const [k, v] of map.entries()) {\r\n      if (!used.has(k)) merged.push(v);\r\n    }\r\n    return merged;\r\n  };\r\n\r\n  // Load events: read localEvents from storage, fetch events.json (no cache), merge\r\n  useEffect(() => {\r\n    // 1) read local events\r\n    const savedLocalRaw = localStorage.getItem(LOCAL_KEY);\r\n    let savedLocal = [];\r\n    if (savedLocalRaw) {\r\n      try {\r\n        const parsed = JSON.parse(savedLocalRaw);\r\n        if (Array.isArray(parsed)) savedLocal = parsed;\r\n      } catch (err) {\r\n        console.warn(\"Invalid local events - clearing local copy\", err);\r\n        savedLocal = [];\r\n      }\r\n    }\r\n    setLocalEvents(savedLocal);\r\n\r\n    // 2) fetch events.json (no-store to force fresh)\r\n    fetch(\"/events.json\", { cache: \"no-store\" })\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error(\"events.json not found\");\r\n        return res.text();\r\n      })\r\n      .then((raw) => {\r\n        // change detection (store raw if changed)\r\n        const prevRaw = localStorage.getItem(JSON_RAW_KEY);\r\n        if (raw !== prevRaw) {\r\n          localStorage.setItem(JSON_RAW_KEY, raw);\r\n        }\r\n\r\n        let parsed = [];\r\n        try {\r\n          parsed = JSON.parse(raw);\r\n          if (!Array.isArray(parsed)) parsed = [];\r\n        } catch (err) {\r\n          console.warn(\"events.json parse error\", err);\r\n          parsed = [];\r\n        }\r\n\r\n        setJsonEvents(parsed);\r\n\r\n        // Build merged list and update UI (this keeps your `events` state populated)\r\n        const merged = buildMerged(parsed, savedLocal);\r\n        setEvents(merged);\r\n      })\r\n      .catch((err) => {\r\n        // if fetch fails, fallback to local events only\r\n        console.warn(\"Could not fetch events.json:\", err);\r\n        setJsonEvents([]);\r\n        const merged = buildMerged([], savedLocal);\r\n        setEvents(merged);\r\n      });\r\n  }, []); // run once on mount\r\n\r\n  // Persist helper for local events (we persist localEvents separately, and rebuild merged UI)\r\n  const persistLocal = (updatedLocal) => {\r\n    setLocalEvents(updatedLocal);\r\n    try {\r\n      localStorage.setItem(LOCAL_KEY, JSON.stringify(updatedLocal));\r\n    } catch (err) {\r\n      console.warn(\"Could not save local events:\", err);\r\n    }\r\n    // rebuild merged UI using the current jsonEvents\r\n    setEvents(buildMerged(jsonEvents, updatedLocal));\r\n  };\r\n\r\n  // Add new event -> add to localEvents (keeps events.json intact, prevents duplication)\r\n  const addEvent = (e) => {\r\n    e.preventDefault();\r\n    if (!newEvent.title || !newEvent.date) return;\r\n\r\n    const added = { ...newEvent, source: \"local\" };\r\n    const updatedLocal = [...localEvents, added];\r\n    persistLocal(updatedLocal);\r\n\r\n    setNewEvent({ title: \"\", date: \"\", location: \"\", desc: \"\" });\r\n  };\r\n\r\n  // Delete event: if event is local, remove from local list. If it is from json, create a tombstone in local to hide it.\r\n  const deleteEvent = (index) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this event?\")) return;\r\n\r\n    const ev = events[index];\r\n    const key = eventKey(ev);\r\n\r\n    if (!ev) return;\r\n\r\n    if (ev.source === \"local\") {\r\n      // remove local item with same key\r\n      const updatedLocal = localEvents.filter((le) => eventKey(le) !== key);\r\n      persistLocal(updatedLocal);\r\n    } else {\r\n      // create a tombstone to hide json-origin event\r\n      const tombstone = { title: ev.title, date: ev.date, __deleted: true, source: \"local\" };\r\n      // prevent duplicate tombstones\r\n      const already = localEvents.some((le) => le.__deleted && eventKey(le) === key);\r\n      if (!already) {\r\n        persistLocal([...localEvents, tombstone]);\r\n      }\r\n    }\r\n\r\n    // adjust editIndex if the removed item affects it\r\n    if (editIndex === index) {\r\n      setEditIndex(null);\r\n      setEditEvent({ title: \"\", date: \"\", location: \"\", desc: \"\" });\r\n    } else if (editIndex !== null && index < editIndex) {\r\n      setEditIndex((prev) => (prev === null ? null : prev - 1));\r\n    }\r\n  };\r\n\r\n  // Start editing an event (index is relative to merged events displayed)\r\n  const startEdit = (index) => {\r\n    setEditIndex(index);\r\n    const ev = events[index];\r\n    setEditEvent({ title: ev.title || \"\", date: ev.date || \"\", location: ev.location || \"\", desc: ev.desc || \"\" });\r\n  };\r\n\r\n  // Cancel edit (kept)\r\n  const cancelEdit = () => {\r\n    setEditIndex(null);\r\n    setEditEvent({ title: \"\", date: \"\", location: \"\", desc: \"\" });\r\n  };\r\n\r\n  // Save edited event: store as local override (so json remains unchanged)\r\n  const saveEdit = (e) => {\r\n    e.preventDefault();\r\n    if (!editEvent.title || !editEvent.date) return;\r\n\r\n    const target = events[editIndex];\r\n    const key = eventKey(target);\r\n    // if there's existing local event with same key, replace it; else add new local override\r\n    const localsCopy = [...localEvents];\r\n    const localIdx = localsCopy.findIndex((le) => eventKey(le) === key);\r\n\r\n    const newLocal = { ...editEvent, source: \"local\" };\r\n    if (localIdx >= 0) localsCopy[localIdx] = newLocal;\r\n    else localsCopy.push(newLocal);\r\n\r\n    persistLocal(localsCopy);\r\n    setEditIndex(null);\r\n    setEditEvent({ title: \"\", date: \"\", location: \"\", desc: \"\" });\r\n  };\r\n\r\n  // UI list filtered: exclude tombstones and optionally sort (kept same structure)\r\n  const uiEvents = events.filter((ev) => !(ev && ev.__deleted));\r\n\r\n  // --- REST OF YOUR ORIGINAL JSX (kept structure, only wiring to uiEvents / events) ---\r\n  return (\r\n    <div>\r\n      {/* Hero */}\r\n      <section className=\"bg-gradient-to-br from-pink-50 to-white border-b\">\r\n        <div className=\"page py-14\">\r\n          <div className=\"grid md:grid-cols-2 items-center gap-10\">\r\n            <div>\r\n              <h1 className=\"text-4xl md:text-5xl font-bold leading-tight\">\r\n                Plan, Publish & Manage <span className=\"text-primary\">Events</span> with Ease\r\n              </h1>\r\n              <p className=\"mt-4 text-gray-600\">\r\n                Create events, track registrations, and share updates â€” all in one simple interface.\r\n              </p>\r\n              <div className=\"mt-6 flex gap-3\">\r\n                <Link to=\"/register\" className=\"btn btn-primary\">Get Started</Link>\r\n                <Link to=\"/about\" className=\"btn bg-white border\">Learn More</Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"card\">\r\n              <h3 className=\"text-lg font-semibold mb-3\">Quick Add Event</h3>\r\n              <form className=\"grid gap-3\" onSubmit={addEvent}>\r\n                <input\r\n                  className=\"border rounded-xl px-4 py-2.5\"\r\n                  placeholder=\"Event Title\"\r\n                  value={newEvent.title}\r\n                  onChange={(e) => setNewEvent({ ...newEvent, title: e.target.value })}\r\n                />\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"border rounded-xl px-4 py-2.5\"\r\n                  value={newEvent.date}\r\n                  onChange={(e) => setNewEvent({ ...newEvent, date: e.target.value })}\r\n                />\r\n                <input\r\n                  className=\"border rounded-xl px-4 py-2.5\"\r\n                  placeholder=\"Location\"\r\n                  value={newEvent.location}\r\n                  onChange={(e) => setNewEvent({ ...newEvent, location: e.target.value })}\r\n                />\r\n                <textarea\r\n                  className=\"border rounded-xl px-4 py-2.5\"\r\n                  rows=\"3\"\r\n                  placeholder=\"Description\"\r\n                  value={newEvent.desc}\r\n                  onChange={(e) => setNewEvent({ ...newEvent, desc: e.target.value })}\r\n                />\r\n                <button className=\"btn btn-primary\" type=\"submit\">Add Event</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Events list */}\r\n      <section className=\"page\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-2xl font-semibold\">Upcoming Events</h2>\r\n          {/* Refresh button to re-read events.json (handy when you change file on disk) */}\r\n          <button\r\n            className=\"btn bg-white border text-sm\"\r\n            onClick={() => {\r\n              // clear stored json raw so the next load will treat events.json as changed\r\n              localStorage.removeItem(JSON_RAW_KEY);\r\n              // simple full reload to re-run the useEffect fetch logic\r\n              window.location.reload();\r\n            }}\r\n          >\r\n            Refresh events.json\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-5\">\r\n          {uiEvents.length === 0 && (\r\n            <p className=\"text-gray-500\">No events yet. Add one using the form above.</p>\r\n          )}\r\n\r\n          {uiEvents.map((e, i) => (\r\n            <div key={i} className=\"card\">\r\n              {editIndex === i ? (\r\n                <form className=\"grid gap-3\" onSubmit={saveEdit}>\r\n                  <input\r\n                    className=\"border rounded-xl px-4 py-2.5\"\r\n                    placeholder=\"Event Title\"\r\n                    value={editEvent.title}\r\n                    onChange={(ev) => setEditEvent({ ...editEvent, title: ev.target.value })}\r\n                    required\r\n                  />\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"border rounded-xl px-4 py-2.5\"\r\n                    value={editEvent.date}\r\n                    onChange={(ev) => setEditEvent({ ...editEvent, date: ev.target.value })}\r\n                    required\r\n                  />\r\n                  <input\r\n                    className=\"border rounded-xl px-4 py-2.5\"\r\n                    placeholder=\"Location\"\r\n                    value={editEvent.location}\r\n                    onChange={(ev) => setEditEvent({ ...editEvent, location: ev.target.value })}\r\n                  />\r\n                  <textarea\r\n                    className=\"border rounded-xl px-4 py-2.5\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Description\"\r\n                    value={editEvent.desc}\r\n                    onChange={(ev) => setEditEvent({ ...editEvent, desc: ev.target.value })}\r\n                  />\r\n                  <div className=\"flex gap-2\">\r\n                    <button className=\"btn btn-primary\" type=\"submit\">Save</button>\r\n                    <button type=\"button\" className=\"btn bg-white border\" onClick={cancelEdit}>Cancel</button>\r\n                  </div>\r\n                </form>\r\n              ) : (\r\n                <>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <img\r\n                        src={uploadedImageUrl}\r\n                        alt=\"thumb\"\r\n                        className=\"w-12 h-12 rounded-md object-cover\"\r\n                        onError={(ev) => { ev.currentTarget.style.display = \"none\"; }}\r\n                      />\r\n                      <div>\r\n                        <h3 className=\"text-lg font-semibold\">{e.title}</h3>\r\n                        <p className=\"text-sm text-gray-600\">{e.location}</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <span className=\"text-xs bg-pink-100 text-pink-600 px-2 py-1 rounded-full\">{e.date}</span>\r\n                  </div>\r\n\r\n                  <p className=\"text-sm mt-3\">{e.desc}</p>\r\n\r\n                  <div className=\"mt-4 flex gap-2\">\r\n                    <button className=\"btn bg-white border\" onClick={() => startEdit(i)}>Edit</button>\r\n                    <button className=\"btn btn-danger\" onClick={() => deleteEvent(i)}>Delete</button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}